/*! gitFeed.js (Github Activity Feed Display) | Copyright 2014 Bronek Szulc | https://github.com/Bszulc/gitFeed.js */
var gitFeed=function(e){"use strict";var t,a,r={full:["January","February","March","April","May","June","July","August","September","October","November","December"],"short":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"]},n=function(e,t){var a;for(a in t)e.hasOwnProperty(a)||(e[a]=t[a])},o=function(a){var r,n,o,l;return(r=sessionStorage.getItem("gitfeed_store"))?void a(JSON.parse(r)):(n="https://api.github.com/users/"+t.username+"/events/public",o="gitfeed_cb_"+Math.round(1e5*Math.random()),l=document.createElement("script"),l.src=n+(n.indexOf("?")>=0?"&":"?")+"callback="+o,document.body.appendChild(l),void(e[o]=function(t){if(delete e[o],document.body.removeChild(l),t.data.hasOwnProperty("message"))throw new Error(t.data.message);sessionStorage.setItem("gitfeed_store",JSON.stringify(t.data)),a(t.data)}))},l=function(e,a,r){var n,o,l,i,s,d,c;o="gitfeed-item-section",i="gitfeed-label",n=document.createElement("div"),n.className=a.itemClass+" "+o,t.hideLabels||(s=document.createTextNode(a.label),l=document.createElement("span"),l.className=i,l.appendChild(s),n.appendChild(l)),"link"===r?(a.url="https://github.com"+a.url.split("/repos")[1].replace(/\/commits\//,"/commit/"),d=document.createElement("a"),d.href=a.url,d.setAttribute("target","_blank")):d=document.createElement("span"),c=document.createTextNode(a.content),d.appendChild(c),n.appendChild(d),e.appendChild(n)},i=function(e){var n,o,i,s;for(o=document.createElement("ul"),n=0;n<t.results;n++)i=document.createElement("li"),i.className="gitfeed-item",s={},s.current=e[n],s.date=new Date(s.current.created_at),s.minutes=(s.date.getMinutes()<10?"0":"")+s.date.getMinutes(),s.hours=(s.date.getHours()<10?"0":"")+s.date.getHours(),s.day=(s.date.getDate()<10?"0":"")+s.date.getDate(),s.month=t.fullMonthNames?r.full[s.date.getMonth()]:r.short[s.date.getMonth()],s.year=s.date.getFullYear(),s.type=s.current.type.replace("Event",""),s.current.payload.commits&&l(i,{itemClass:"gitfeed-commit",label:"commit:",url:s.current.payload.commits[0].url,content:s.current.payload.commits[0].message},"link"),s.current.repo&&l(i,{itemClass:"gitfeed-repo",label:"repo:",url:s.current.repo.url,content:s.current.repo.name.toLowerCase()},"link"),l(i,{itemClass:"gitfeed-action",label:"action:",content:s.type}),l(i,{itemClass:"gitfeed-date",label:"date:",content:s.day+" "+s.month+", "+s.year+" - "+s.hours+":"+s.minutes}),o.appendChild(i);a.forEach(function(e){e.appendChild(o)})},s=function(e){var r,l;if(t=e||{},r={targetClass:"gitfeed",fullMonthNames:!1,hideLabels:!1,results:10},!t.hasOwnProperty("username"))throw new Error("gitFeed.js : please initialize the plugin with a valid Github username.");n(t,r),l=document.querySelectorAll("."+t.targetClass),a=Array.prototype.slice.call(l),o(i)};return s}(window);