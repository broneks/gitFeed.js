/*! gitFeed.js (Github Activity Feed Display) | Copyright 2014-2015 Bronek Szulc | https://github.com/broneks/gitFeed.js */
var gitFeed=function(e){"use strict";var t,r,a=function(e,t){var r;for(r in t)e.hasOwnProperty(r)||(e[r]=t[r])},n=function(r){var a,n,o,i;return t.sessionStorage&&(a=sessionStorage.getItem("gitfeed_store"))?void r(JSON.parse(a)):(n="https://api.github.com/users/"+t.username+"/events/public",o="gitfeed_cb_"+Math.round(1e5*Math.random()),i=document.createElement("script"),i.src=n+(n.indexOf("?")>=0?"&":"?")+"callback="+o,document.body.appendChild(i),void(e[o]=function(a){if(delete e[o],document.body.removeChild(i),a.data.hasOwnProperty("message"))throw new Error(a.data.message);t.sessionStorage&&sessionStorage.setItem("gitfeed_store",JSON.stringify(a.data)),r(a.data)}))},o=function(e,r,a){var n,o,i,s,c,l,u,d;o="gitfeed-item-section",s="gitfeed-label",c="gitfeed-value",n=document.createElement("div"),n.className=r.itemClass+" "+o,t.hideLabels||(l=document.createTextNode(r.label),i=document.createElement("span"),i.className=s,i.appendChild(l),n.appendChild(i)),"link"===a?(r.url="https://github.com"+r.url.split("/repos")[1].replace(/\/commits\//,"/commit/"),u=document.createElement("a"),u.href=r.url,u.setAttribute("target","_blank")):u=document.createElement("span"),d=document.createTextNode(r.content),u.className=c,u.appendChild(d),n.appendChild(u),e.appendChild(n)},i=function(){var e={"long":"January February March April May June July August September October November December".split(" "),"short":"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")},r=function(e){if(t.timeFormat&&"hide"===t.timeFormat.toLowerCase())return"";var r=e.hours,a=e.minutes,n="";return t.timeFormat&&"12"===t.timeFormat&&(r=e.hours>12?e.hours-12:e.hours,n=e.hours>12?" PM":" AM")," "+String.fromCharCode(8211)+" "+(10>r?"0":"")+r+":"+(10>a?"0":"")+a+n},a=function(e){return e.month+1+"/"+e.day+"/"+e.year+r(e)},n=function(t){return e.short[t.month]+" "+t.day+", "+t.year+r(t)},o=function(t){return e.long[t.month]+" "+t.day+", "+t.year+r(t)};return function(e){var r,i;switch(i={month:e.getMonth(),day:e.getDate(),year:e.getFullYear(),hours:e.getHours(),minutes:e.getMinutes()},t.dateFormat.toLowerCase()){case"hide":r="";break;case"short":r=a(i);break;case"medium":r=n(i);break;case"long":default:r=o(i)}return r}}(),s=function(e){var a,n,s,c,l,u;for(c=document.createElement("ul"),n=e.length,s=!t.results||t.results>n?n:t.results,a=0;s>a;a++)l=document.createElement("li"),l.className="gitfeed-item",u={},u.current=e[a],u.type=u.current.type.replace("Event",""),t.hideWatched&&"watch"===u.type.toLowerCase()?n-1>=s&&(s+=1):(u.date=i(new Date(u.current.created_at)),u.current.payload.commits&&o(l,{itemClass:"gitfeed-commit",label:"commit:",url:u.current.payload.commits[0].url,content:u.current.payload.commits[0].message},"link"),u.current.repo&&o(l,{itemClass:"gitfeed-repo",label:"repo:",url:u.current.repo.url,content:u.current.repo.name},"link"),o(l,{itemClass:"gitfeed-action",label:"action:",content:u.type}),u.date&&o(l,{itemClass:"gitfeed-date",label:"date:",content:u.date}),c.appendChild(l));r.forEach(function(e){e.appendChild(c)})},c=function(e){var o,i,c;if(t=e||{},o={targetClass:"gitfeed",dateFormat:"long",hideLabels:!1,hideWatched:!1,sessionStorage:!0},!t.hasOwnProperty("username"))throw new Error("gitFeed.js : please initialize the plugin with a valid Github username.");a(t,o),i=document.querySelectorAll("."+t.targetClass),r=Array.prototype.slice.call(i);try{n(s)}catch(l){for(c=0;c<r.length;c++)r[c].parentNode.removeChild(r[c]);throw new Error("gitFeed.js : an unexpected error occurred: "+l)}};return c}(window);
